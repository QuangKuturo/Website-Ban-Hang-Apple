@using TECH.Areas.Admin.Models
@model ProductModelView
@{
    ViewData["Title"] = "ProductCategory";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
    .price-color[data-v-f7970b56] {
        color: red !important;
        font-weight: bold;
        font-size: 18px;
    }
</style>
<input type="hidden" class="product-id" value="@Model.id"/>
<div data-v-f7970b56="">
    <section data-v-f7970b56="" class="ftco-section">
        <div data-v-f7970b56="" class="container">
            <div data-v-f7970b56="" class="row">
                <div data-v-f7970b56="" class="col-lg-6 mb-5"><a data-v-f7970b56="" href="#" class="image-popup" style="height: 40vh;"><img data-v-f7970b56="" src="../../../../public/images/product/CA8755F7-1424-449D-812A-9272B8323BBF.jpeg" alt="Colorlib Template" class="img-fluid" style="height: 80vh;"></a></div>
                <div data-v-f7970b56="" class="col-lg-6 product-details pl-md-5">
                    <h3 data-v-f7970b56="">@Model.name</h3>
                    <div data-v-f7970b56="" class="row">
                        <div data-v-f7970b56="" class="col-md-4" style="color: rgb(0, 0, 0);">
                            Danh mục: <span data-v-f7970b56="" style="color: green;"> @Model.categorystr</span>
                        </div>
                        <div data-v-f7970b56="" class="col-md-4" style="color: rgb(0, 0, 0);">
                            Tình trạng:
                            <span data-v-f7970b56="" style="color: green;"> Còn hàng</span> <span data-v-f7970b56="" style="color: red; display: none;"> Hết hàng</span>
                        </div>
                        <div data-v-f7970b56="" class="col-md-4" style="color: rgb(0, 0, 0);">
                            <!----> <span data-v-f7970b56="" style="color: green;"> Hàng mới</span>
                        </div>
                    </div>
                    @{
                        decimal priceStr = 0;
                        if (Model.price.Contains(";"))

                        {
                            priceStr = Convert.ToDecimal(Model.price.Split(";")[0]);
                        }
                        else
                        {
                            priceStr = Convert.ToDecimal(Model.price);
                        }
                    }
                    <input type="hidden" value="@priceStr" class="product-price"/>

                    <p data-v-f7970b56="" class="price"><span data-v-f7970b56="" class="price-color">@priceStr.ToString("#,###")<i data-v-f7970b56="">đ</i></span></p>
                    <p data-v-f7970b56="">@Model.short_desc</p>
                    <div data-v-f7970b56="" class="row mt-4">
                        <div data-v-f7970b56="" class="w-100"></div>
                        <div data-v-f7970b56="" class="input-group col-md-6 d-flex mb-3">
                            <span data-v-f7970b56="" class="input-group-btn mr-2">
                                <button data-v-f7970b56="" type="button" data-type="minus" data-field="" class="quantity-left-minus minus btn">
                                    <i data-v-f7970b56="" class="ion-ios-remove"></i>
                                </button>
                            </span> 
                            <input data-v-f7970b56="" type="number" min="1" value="1" id="quantity" class="form-control input-number">
                            <span data-v-f7970b56="" class="input-group-btn ml-2">
                                <button data-v-f7970b56="" type="button" data-type="plus" class="quantity-right-plus btn plus">
                                    <i data-v-f7970b56="" class="ion-ios-add"></i>
                                </button>
                            </span>
                        </div>
                        <div data-v-f7970b56="" class="w-100"></div>
                        <div data-v-f7970b56="" class="col-md-12">
                            <button data-v-f7970b56="" class="btn mr-2 select-color active" style="display: none;">
                                null
                            </button>
                        </div>
                        <div data-v-f7970b56="" class="col-md-12">
                            <p data-v-f7970b56="" style="color: rgb(0, 0, 0);">Còn 89 sản phẩm</p>
                        </div>
                    </div>
                    <div data-v-f7970b56="" class="row mb-4" style="display: none;">
                        <div data-v-f7970b56="" class="col-md-12">
                            <div data-v-f7970b56="" class="card">
                                <h5 data-v-f7970b56="" class="card-header endow">Ưu đãi</h5>
                                <div data-v-f7970b56="" class="card-body">
                                    <p data-v-f7970b56="">null</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div data-v-f7970b56="" class="row">
                        <div data-v-f7970b56="" class="col-md-12">
                            <p data-v-f7970b56="">
                                <a data-v-f7970b56="" href="javascript:void(0)" class="btn btn-black py-3 px-5 btn-block btn-add-cart">
                                    Thêm vào giỏ <i data-v-f7970b56="" class="ion-ios-add ml-1"></i>
                                </a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section data-v-f7970b56="" class="ftco-section ftco-degree-bg">
        <div data-v-f7970b56="" class="container">
            <div data-v-f7970b56="" class="row">
                <div data-v-f7970b56="" class="col-lg-7">
                    <h2 data-v-f7970b56="" class="mb-3">Mô tả sản phẩm</h2>
                    @Html.Raw(Model.description)
                    @* <p data-v-f7970b56="">
                    <p>With a 5K (5120 x 2880) screen resolution, this iMac provides one billion colors and 500 nits of brightness. The Retina 5K display also features the wider P3 color gamut, which provides a larger color space that shifts away from standard white LEDs to red-green phosphor LEDs that more equally represent red, green, and blue. And with more available colors, the images will appear more vivid and reveal greater detail, with more balance and precision. The display is further enhanced by True Tone technology for a more natural viewing experience</p>
                    <p>The iMac’s processor has been upgraded and now houses an 10th Gen 3.8 GHz Intel Core i7 8-Core processor that can be overclocked up to 5.0 GHz, as well as 8GB of 2666 MHz DDR4 RAM in a 2 x 4GB configuration that can be upgraded to 128GB by using an 32GB module in each of the four SO-DIMM slots. Visuals are powered by a dedicated AMD Radeon Pro 5500 XT graphics card with 8GB of GDDR6 video memory, and for storage, there is a 512GB PCIe SSD.</p>
                    <p><img alt="" src="../../../../public/images/product/desc/iMac_2020_new_1.jpg_1576962810.jpg" style="height:100%; width:100%"></p>
                    </p>*@
                </div>
                <div data-v-f7970b56="" class="col-lg-5 sidebar">
                    <div data-v-f7970b56="" class="sidebar-box">
                        <h3 data-v-f7970b56="" class="heading" style="background-color: rgb(0, 0, 0); padding: 1vh; color: rgb(255, 255, 255);">Thông số kỹ thuật</h3>
                        <table data-v-f7970b56="" class="table table-striped" style="min-width: 100% !important;">
                            <tbody data-v-f7970b56="">
                                <tr data-v-f7970b56="">
                                    <td data-v-f7970b56="" style="text-align: left !important; padding: 1vh !important;">
                                        Màn hình:
                                    </td>
                                    <td data-v-f7970b56="" style="text-align: left !important; padding: 1vh !important;">
                                        lớn
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                 
                     @await Component.InvokeAsync("ProductsLikeComponent", new{categoryId=Model.category_id})

                </div>
            </div>
        </div>
    </section>

      @await Component.InvokeAsync("RelatedProductsComponent",new {categoryId= Model.category_id,productId=Model.id})
    @*<section data-v-f7970b56="" class="ftco-section bg-light">
        <div data-v-f7970b56="" class="container">
            <div data-v-f7970b56="" class="row justify-content-center mb-3 pb-3">
                <div data-v-f7970b56="" class="col-md-12 heading-section text-center">
                    <h2 data-v-f7970b56="" class="mb-4">Sản phẩm liên quan</h2>
                </div>
            </div>
        </div>
        <div data-v-f7970b56="" class="container">
            <div data-v-f7970b56="" class="cards"></div>
        </div>
    </section>*@
</div>
<div  id="categoryModal" tabindex="-1" role="dialog" aria-labelledby="categoryModalTitle" class="modal fade" aria-modal="true">
   <div  role="document" class="modal-dialog">
      <form id="form-submit" action="#">
         <div  class="modal-content">
            <div  class="modal-header bg-primary">
               <h5  id="titleModal" class="modal-title white ">Vui lòng đăng nhập</h5>
               <button  type="button" data-dismiss="modal" aria-label="Close" class="close"><span  aria-hidden="true">×</span></button>
            </div>
            <div  class="modal-body">
            </div>
            <div  class="modal-footer">
                <a href="/dang-nhap" class="btn btn-primary me-1 mb-1 btn-submit-format">Đăng nhập</a>
                <a href="#" class="btn btn-primary me-1 mb-1 btn-submit-format" data-dismiss="modal">Hủy</a>
                </div>
         </div>
      </form>
   </div>
</div>

<div  id="CartsModal" tabindex="-1" role="dialog" aria-labelledby="categoryModalTitle" class="modal fade" aria-modal="true">
   <div  role="document" class="modal-dialog">
      <form id="form-submit" action="#">
         <div  class="modal-content">
            <div  class="modal-header bg-primary">
               <h5  id="titleModal" class="modal-title white ">Thêm vào giỏ hàng thành công</h5>
               <button  type="button" data-dismiss="modal" aria-label="Close" class="close"><span  aria-hidden="true">×</span></button>
            </div>
            <div  class="modal-body">
            </div>
            <div  class="modal-footer">
                @*<a href="/dang-nhap" class="btn btn-primary me-1 mb-1 btn-submit-format">OK</a>*@
                <a href="#" class="btn btn-primary me-1 mb-1 btn-submit-format" data-dismiss="modal">OK</a>
                </div>
         </div>
      </form>
   </div>
</div>


@section Scripts{
        <script type="text/javascript">
    $(document).ready(function () {
        $(".plus").click(function () {
            var value = parseInt($("#quantity").val());
            if (value < 9999) {
                $("#quantity").val(value + 1);
            }

        })
        $(".minus").click(function () {
            var value = parseInt($("#quantity").val());
            if (value > 1) {
                $("#quantity").val(value - 1);
            }

        })
        $(".btn-add-cart").click(function () {

            $.ajax({
                url: '/Carts/Add',
                type: 'POST',
                dataType: 'json',
                data: {
                    product_id: $(".product-id").val(),
                    quantity: $("#quantity").val(),
                    price:$(".product-price").val()
                },
                beforeSend: function () {
                   // Loading('show');
                },
                complete: function () {
                   // Loading('hiden');
                },
                success: function (response) {
                    if (response.success) {
                        $("#CartsModal").modal("show");
                    }
                    else{
                         $("#categoryModal").modal("show");
                    }
                }
            })

        })

    })


</script>
}